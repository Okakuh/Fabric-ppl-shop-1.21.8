# PepeLand Shop

Клиентский мод для Minecraft для поиска самых дешевых цен на табличках с соответствующим текстом. 

## Функции
- **Поиск строк**: `/shop <стак> <паттерн>`
- **Поиск по regex**: `/shop_rgx <стак>  <регулярное_выражение>`
- **Визуальная подсветка**: Найденые таблицы подсвечиваються сквозь другие блоки
- **Парсинг цен**: Парсит текст с таблиц на предмет цены и количества продваемого товара
- **Навигация по ценам**: Стрелки для переключения между ценовыми категориями
- **Функция Quick Shop**: Открывает чат и вводит строку "/shop 64 " по нажатию комбинации клавиш. Выключена по умолчанию
- **Настройка через команды**: Конфиг мода можно настроить как вам угодно через команды

## Как этот мод работает
- Вводите команду для поиска
- Мод сканирует все таблички в радиусе (по умолчанию 40 блоков) на совпадения текста
- Из совпавших таблиц он пытаеться вытянуть цену товара и количество
- Соритрует их от дешевых к дорогим и групирует в ценовые категории
- Переходит в режим "навигации" по ценовым категориям и подсвечивает первую категорию с нейменьшей ценой
- Вы можете переключаться между категориями по нажатию кнопок (по умолчанию стелки вверх/вниз) на клавиатуре и когда нашли то что искали, завершить "навигацию" по нажатю кнопки (по умолчанию Backspase)

## Поиск
### Подсказки по использованию
- В параметры команды вы передаете значение stack и pattern
- stack - значит в каком количестве этот предмет стакается. Для нестакабельных 1, для остальных 16 и 64. Рекомендация: Этот параметр также используеться во время опеределения количества, если на табличке цена указана за "слот". Так что если вы покупаете что-то ценное, например незерит, что продаеться скорее всего поштучно, то я рекомендую ставить значение стака 1. Ниже вы узнаете почему.
- pattern - последовательность символов которую вы хотите найти. Может быть одно слово. Или несколько. Или, я не знаю как это обяснить... логический поиск?

### Примеры паттернов поиска
```bash
/shop 1 топор                      # Поиск по одному слову
```
### Логический поиск
```bash
/shop 1 алмаз+ ру да               # (И "алмаз" И " ру да") Должны быть все части поиска разделенные знаком "+"
/shop 1 алмаз -уголь               # (ИЛИ "алмаз " ИЛИ "уголь") Должна быть хотя бы одна часть поиска разделенная знаком "-"
/shop 1 кирк+удач-кирка-кирка+шелк # Смешанный (кирк И удач) ИЛИ (кирка) ИЛИ (кирка и шелк)
```
### Регулярное выражение
```bash
/shop_rgx 1 [а-я]+.*алм            # Поиск по регулярному выражению
```

## Навигация (можно настроить свои кнопки через конфиг)
- Стрелки ↑/↓ - Переключение между ценовыми группами 
- Backspace - Остановить навигацию и завершить поиск

## Quick Shop (По умолчанию эта функция выключена)
- Открывает чат и вводит строку message из конфига по нажатию комбинации клавиш
- Можно влючить через /shop_config quick_shop enable true
- Можно настроить message если ввести /shop_config quick_shop message <ваш текст для вставки>
- Можно настроить клавиши через /shop_config keybinds set quick_shop
- Комбинация клавиш по умолчанию Left Alt + W

## Настройка персональных комбинаций клавиш
- Настройка производиться только через команды для того, чтобы дать пользователям возможность устанавливать не только единичные клавиши, но и комбинации
- Вы можете настроить свои комбинации прописав /shop_config keybinds set <функция на которую хотите установить другую комбинацию>
- Чтобы увидеть инструкцию пропишите /shop_config keybinds help

## Настройки по умолчанию
- Радиус поиска: 40 блоков но вы можете установить хоть и все 200 для поиска сразу по всей ТЗ
- Диапазон координат по Y: 0-3
- Цвета подсветки: белый и черный
- quick_shop message: "/shop 64 "

## Логика определения количества
- Во время парсинга количества скрипт находит число, которое считаеться количеством, и слово-модификатор (Пример: 1 стак / 64 шт / 2 слота / 2 шалкера)
- Логика мода опираясь на то, с каких букв начинаеться слово-модификатор:
    - Предположим что вы вписали команду /shop 16 яйц чтобы найти яйца. В таком случае параметр stack = 16.
    - "ст" = стак = умножить найденное количество на параметр команды stack ("2 стака" = 2 * 16 = 32 шт)
    - "ша" = шалкер = умножить найденное количество на параметр stack*27 ("2 шалкера" = 2 * 16 * 27 = 864 шт)
    - "м" = мешок = умножить найденное количество на параметр stack ("2 мешка" = 2 * 16 = 32 шт)
    - "сло" = слот: (Это логика для поиска товаров, которые обычно продаються по целому стаку в слоте, но иногда могут меньше)
        - если найденное количество равно 1, то присвоить количеству значение stack / 4 ("1 слот" = 16 / 4 = 4 шт)
        - если найденное количество равно 2 и больше, умножить найденное количество на параметр stack ("3 слота" = 3 * 16 = 48 шт)

## Требования
- Minecraft 1.21.8
- Fabric Loader
- Fabric API
- Вретолет и 3 золотых нагенца
